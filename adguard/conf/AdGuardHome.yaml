tls:
  enabled: true
  server_name: ""
  force_https: false
  port_https: 443
  port_dns_over_tls: 853
  port_dns_over_quic: 853
  port_dnscrypt: 0
  dnscrypt_config_file: ""
  allow_unencrypted_doh: true
  certificate_chain: ""
  private_key: ""
  certificate_path: ""
  private_key_path: ""
  strict_sni_check: false
dns:
  # ... other DNS settings like port, bind_host ...

  # Define the HTTP (plain text) DoH server here
  # Caddy will connect to this port over HTTP
  upstream_dns_json_server:
    - bind_host: 0.0.0.0 # Crucial: Listen on all interfaces
      port: 8443 # Choose an available HTTP port for DoH
      path: /dns-query # Standard path for DoH
      # You do NOT want 'tls_port' or 'tls_cert' here
      # as Caddy will handle TLS
