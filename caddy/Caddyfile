{
    email h-adji_tech@proton.me
}

(cf_tls) {
    tls {
            dns cloudflare {env.CF_TOKEN}
    }
}

*.hadji.org {
    import cf_tls
}

adguard-setup.hadji.org {
    reverse_proxy adguard:3000
}

adguard-dashboard.hadji.org {
    reverse_proxy adguard:80
}

health.hadji.org {
    respond "all good"
}

task.hadji.org {
    reverse_proxy taskchampion:8080
}

jellyfin.hadji.org {
    reverse_proxy jellyfin:8096
}

conf.hadji.org {
    @setup_redirect {
        path /setup
        path /setup/
    }

    redir @setup_redirect https://h-adji.github.io/dotfiles/init.sh 301
    root * /var/www/static/archinstall
    file_server {
        browse
    }
    header Cache-Control "public, max-age=3600"
}
